{% extends "layouts/base.html" %}

{% block title %}{{ t('common.welcome') }} - Localization Demo{% endblock %}

{% block content %}
<h2>üåç {{ t('common.welcome') }} - Localization Demo</h2>

<!-- Current Language Info -->
<div class="alert alert-success">
    <h4>{{ t('common.navigation.home') }} - Current Language: {{ locale() }}</h4>
    <p><strong>Detected Locale:</strong> {{ current_locale }}</p>
    <p><strong>Available Languages:</strong> Deutsch, English, Fran√ßais, Espa√±ol</p>
</div>

<!-- Language Switcher -->
<div class="language-switcher">
    <h3>üîÑ Change Language</h3>
    <form method="POST">
        <input name="_token" type="hidden" value="{{ csrf_token }}">
        <input name="change_language" type="hidden" value="1">
        <select name="locale" onchange="this.form.submit()">
            <option value="de">Deutsch</option>
            <option value="en">English</option>
            <option value="fr">Fran√ßais</option>
            <option value="es">Espa√±ol</option>
        </select>
    </form>
</div>

<!-- Translation Functions Demo -->
<section>
    <h3>üé® Translation Functions</h3>
    <div class="demo-section">
        <h4>Function Syntax:</h4>
        <ul>
            <li><strong>Welcome:</strong> {{ t('common.welcome') }}</li>
            <li><strong>Login:</strong> {{ t('auth.login') }}</li>
            <li><strong>Password:</strong> {{ t('auth.password') }}</li>
            <li><strong>Home:</strong> {{ t('common.navigation.home') }}</li>
            <li><strong>Team:</strong> {{ t('common.navigation.team') }}</li>
        </ul>

        <h4>Filter Syntax:</h4>
        <ul>
            <li><strong>Welcome Filter:</strong> {{ 'common.welcome'|t }}</li>
            <li><strong>Login Filter:</strong> {{ 'auth.login'|t }}</li>
            <li><strong>Password Filter:</strong> {{ 'auth.password'|t }}</li>
            <li><strong>Home Filter:</strong> {{ 'common.navigation.home'|t }}</li>
            <li><strong>Team Filter:</strong> {{ 'common.navigation.team'|t }}</li>
        </ul>

        <h4>Plural Translations:</h4>
        <ul>
            <li><strong>1 Goal (Function):</strong> {{ t_plural('game.goals', 1) }}</li>
            <li><strong>3 Goals (Function):</strong> {{ t_plural('game.goals', 3) }}</li>
            <li><strong>1 Player (Filter):</strong> {{ 'game.players'|t_plural:1 }}</li>
            <li><strong>11 Players (Filter):</strong> {{ 'game.players'|t_plural:11 }}</li>
        </ul>

        <h4>With Parameters:</h4>
        <ul>
            <li><strong>Messi Goal:</strong> {{ t('match.goal_scored', {player: 'Messi', minute: 90}) }}</li>
            <li><strong>Ronaldo Goal:</strong> {{ t('match.goal_scored', {player: 'Cristiano', minute: 78}) }}</li>
        </ul>

        <h4>System Functions:</h4>
        <ul>
            <li><strong>Current Locale:</strong> {{ locale() }}</li>
            <li><strong>Match Started:</strong> {{ t('match.match_started') }}</li>
            <li><strong>Live Ticker:</strong> {{ 'match.live_ticker'|t }}</li>
        </ul>
    </div>
</section>

<!-- Syntax Comparison -->
<section>
    <h3>üìù Syntax Comparison</h3>
    <div class="demo-section">
        <div class="syntax-grid">
            <div class="syntax-item">
                <h5>Function Syntax Examples</h5>
                <div class="example-box">
                    <strong>Basic Translation:</strong><br>
                    <span class="syntax">t('common.welcome')</span><br>
                    <span class="result">Result: {{ t('common.welcome') }}</span>
                </div>
                <div class="example-box">
                    <strong>Plural Translation:</strong><br>
                    <span class="syntax">t_plural('game.goals', 3)</span><br>
                    <span class="result">Result: {{ t_plural('game.goals', 3) }}</span>
                </div>
                <div class="example-box">
                    <strong>With Parameters:</strong><br>
                    <span class="syntax">t('match.goal_scored', {player: 'Messi'})</span><br>
                    <span class="result">Result: {{ t('match.goal_scored', {player: 'Messi', minute: 90}) }}</span>
                </div>
            </div>

            <div class="syntax-item">
                <h5>Filter Syntax Examples</h5>
                <div class="example-box">
                    <strong>Basic Translation:</strong><br>
                    <span class="syntax">'common.welcome'|t</span><br>
                    <span class="result">Result: {{ 'common.welcome'|t }}</span>
                </div>
                <div class="example-box">
                    <strong>Plural Translation:</strong><br>
                    <span class="syntax">'game.goals'|t_plural:3</span><br>
                    <span class="result">Result: {{ 'game.goals'|t_plural:3 }}</span>
                </div>
                <div class="example-box">
                    <strong>System Function:</strong><br>
                    <span class="syntax">locale()</span><br>
                    <span class="result">Result: {{ locale() }}</span>
                </div>
            </div>
        </div>

        <div class="usage-note">
            <h5>üìã Usage Guidelines:</h5>
            <ul>
                <li><strong>Function Syntax:</strong> Best for complex translations with parameters</li>
                <li><strong>Filter Syntax:</strong> Cleaner for simple key-based translations</li>
                <li><strong>Parameters:</strong> Only supported in function syntax</li>
                <li><strong>System Functions:</strong> locale() has no filter equivalent</li>
            </ul>
        </div>
    </div>
</section>

<!-- Data Display -->
<section>
    <h3>üìä Translation Data</h3>
    <div class="demo-section">
        <h4>Navigation Translations:</h4>
        {% for demo_data.navigation as nav %}
        <p><strong>{{ nav.key }}:</strong> {{ nav.translated }}</p>
        {% endfor %}

        <h4>Authentication Translations:</h4>
        {% for demo_data.auth as auth %}
        <p><strong>{{ auth.key }}:</strong> {{ auth.translated }}</p>
        {% endfor %}

        <h4>Game Statistics:</h4>
        {% for demo_data.game_stats as stat %}
        <div class="stat-item">
            <strong>{{ stat.key }}:</strong><br>
            <span class="singular">Singular: {{ stat.singular }}</span><br>
            <span class="plural">Plural: {{ stat.plural }}</span>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Debug Information -->
<section>
    <h3>üîç Debug Information</h3>
    <div class="demo-section">
        <h4>Language Detection:</h4>
        <ul>
            <li><strong>Detected:</strong> {{ detection_info.detected_locale }}</li>
            <li><strong>From Header:</strong> {{ detection_info.accept_header }}</li>
            <li><strong>Default:</strong> {{ detection_info.default_locale }}</li>
        </ul>

        <h4>Translator Stats:</h4>
        <ul>
            <li><strong>Current:</strong> {{ translator_stats.current_locale }}</li>
            <li><strong>Loaded Namespaces:</strong> {{ translator_stats.loaded_namespaces }}</li>
            <li><strong>Cached Translations:</strong> {{ translator_stats.cached_translations }}</li>
        </ul>

        <details>
            <summary>Full Detection Info</summary>
            <pre>{{ detection_info|json }}</pre>
        </details>
    </div>
</section>

<style>
    .alert-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
    }

    .language-switcher {
        background: #e8f4fd;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        text-align: center;
    }

    .demo-section {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin: 15px 0;
    }

    .syntax-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
    }

    .syntax-item {
        background: white;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #dee2e6;
    }

    .syntax-item h5 {
        margin-top: 0;
        color: #495057;
        border-bottom: 2px solid #e9ecef;
        padding-bottom: 10px;
    }

    .example-box {
        margin: 15px 0;
        padding: 12px;
        background: #f8f9fa;
        border-left: 4px solid #007bff;
        border-radius: 4px;
    }

    .syntax {
        font-family: 'Courier New', monospace;
        background: #e9ecef;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 14px;
        color: #495057;
    }

    .result {
        color: #28a745;
        font-weight: 500;
        font-size: 14px;
    }

    .usage-note {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
    }

    .usage-note h5 {
        margin-top: 0;
        color: #856404;
    }

    .usage-note ul {
        margin-bottom: 0;
    }

    .usage-note li {
        color: #856404;
        margin: 5px 0;
    }

    .stat-item {
        background: white;
        padding: 15px;
        margin: 10px 0;
        border-left: 4px solid #667eea;
        border-radius: 4px;
    }

    .singular {
        color: #28a745;
    }

    .plural {
        color: #007bff;
    }

    section {
        margin: 30px 0;
    }

    select {
        padding: 10px;
        font-size: 16px;
    }

    details {
        margin: 15px 0;
    }

    pre {
        background: #f5f5f5;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
        font-size: 12px;
    }

    ul {
        margin: 10px 0;
    }

    li {
        margin: 5px 0;
    }

    h4 {
        color: #495057;
        margin-top: 20px;
        margin-bottom: 10px;
    }

    @media (max-width: 768px) {
        .syntax-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}