<!-- app/Views/pages/test/localization.html -->
{% extends "layouts/base.html" %}

{% block title %}{{ t('common.welcome') }} - Localization Demo{% endblock %}

{% block content %}
<h2>üåç {{ t('common.welcome') }} - Localization Demo</h2>

<!-- Current Language Info -->
<div class="alert alert-success">
    <h4>{{ t('common.navigation.home') }} - Current Language: {{ locale() }}</h4>
    <p><strong>Detected Locale:</strong> {{ current_locale }}</p>
    <p><strong>Available Languages:</strong>
        {% for supported_locales as code %}
        {{ demo_data.language_names[code] }}{% if not loop.last %}, {% endif %}
        {% endfor %}
    </p>
</div>

<!-- Language Switcher -->
<div class="language-switcher">
    <h3>üîÑ Change Language</h3>
    <form method="POST" style="display: inline-block;">
        <input name="_token" type="hidden" value="{{ csrf_token }}">
        <input name="change_language" type="hidden" value="1">
        <select name="locale" onchange="this.form.submit()" style="padding: 10px; font-size: 16px;">
            {% for supported_locales as code %}
            <option %} %}selected{% code== current_locale endif if value="{{ code }}" {%>
                {{ demo_data.language_names[code] }}
            </option>
            {% endfor %}
        </select>
    </form>
</div>

<!-- Navigation Translations -->
<section>
    <h3>üß≠ {{ t('common.navigation.home') }} - Navigation</h3>
    <div class="demo-section">
        <ul>
            {% for demo_data.navigation as nav %}
            <li><strong>{{ nav.key }}:</strong> {{ nav.translated }}</li>
            {% endfor %}
        </ul>
    </div>
</section>

<!-- Authentication Translations -->
<section>
    <h3>üîê Authentication</h3>
    <div class="demo-section">
        <ul>
            {% for demo_data.auth as auth %}
            <li><strong>{{ auth.key }}:</strong> {{ auth.translated }}</li>
            {% endfor %}
        </ul>
    </div>
</section>

<!-- Game Statistics with Pluralization -->
<section>
    <h3>‚öΩ Game Statistics (Pluralization Demo)</h3>
    <div class="demo-section">
        {% for demo_data.game_stats as stat %}
        <div class="plural-demo">
            <strong>{{ stat.key }}:</strong><br>
            <span class="singular">Singular (1): {{ stat.singular }}</span><br>
            <span class="plural">Plural ({{ stat.count }}): {{ stat.plural }}</span>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Match Events with Parameters -->
<section>
    <h3>üèüÔ∏è {{ t('match.live_ticker') }} - Match Events</h3>
    <div class="demo-section">
        {% for demo_data.match_events as event %}
        <div class="match-event">
            <strong>{{ event.key }}:</strong><br>
            <span class="event-text">{{ event.translated }}</span>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Template Function Examples -->
<section>
    <h3>üé® Template Function Examples</h3>
    <div class="demo-section">
        <h4>Global Functions:</h4>
        <table class="demo-table">
            <tr>
                <td><code>{{ "{{ t('common.welcome') }}" }}</code></td>
                <td>‚Üí</td>
                <td><strong>{{ t('common.welcome') }}</strong></td>
            </tr>
            <tr>
                <td><code>{{ "{{ t('auth.login') }}" }}</code></td>
                <td>‚Üí</td>
                <td><strong>{{ t('auth.login') }}</strong></td>
            </tr>
            <tr>
                <td><code>{{ "{{ t_plural('game.goals', 3) }}" }}</code></td>
                <td>‚Üí</td>
                <td><strong>{{ t_plural('game.goals', 3) }}</strong></td>
            </tr>
            <tr>
                <td><code>{{ "{{ locale() }}" }}</code></td>
                <td>‚Üí</td>
                <td><strong>{{ locale() }}</strong></td>
            </tr>
        </table>

        <h4>Filter Syntax:</h4>
        <table class="demo-table">
            <tr>
                <td><code>{{ "{{ 'common.welcome'|t }}" }}</code></td>
                <td>‚Üí</td>
                <td><strong>{{ 'common.welcome'|t }}</strong></td>
            </tr>
            <tr>
                <td><code>{{ "{{ 'auth.password'|t }}" }}</code></td>
                <td>‚Üí</td>
                <td><strong>{{ 'auth.password'|t }}</strong></td>
            </tr>
            <tr>
                <td><code>{{ "{{ 'game.assists'|t_plural:7 }}" }}</code></td>
                <td>‚Üí</td>
                <td><strong>{{ 'game.assists'|t_plural:7:{count: 7} }}</strong></td>
            </tr>
        </table>

        <h4>With Parameters:</h4>
        <div class="parameter-example">
            <code>{{ "{{ t('match.goal_scored', {player: 'Messi', minute: 90}) }}" }}</code><br>
            <strong>Result:</strong> {{ t('match.goal_scored', {player: 'Messi', minute: 90}) }}
        </div>
    </div>
</section>

<!-- Live Template Demonstration -->
<section>
    <h3>üî• Live Template Demonstration</h3>
    <div class="demo-section">
        <div class="live-demo">
            <!-- Direct template function calls -->
            <p><strong>Welcome Message:</strong> {{ t('common.welcome') }}</p>
            <p><strong>Login Action:</strong> {{ t('auth.login') }}</p>
            <p><strong>Team Page:</strong> {{ t('common.navigation.team') }}</p>

            <!-- Pluralization in action -->
            <p><strong>Goals:</strong> {{ t_plural('game.goals', 1) }} vs {{ t_plural('game.goals', 5) }}</p>
            <p><strong>Players:</strong> {{ t_plural('game.players', 1) }} vs {{ t_plural('game.players', 11) }}</p>

            <!-- With parameters -->
            <p><strong>Match Event:</strong> {{ t('match.goal_scored', {player: 'Cristiano Ronaldo', minute: 78}) }}</p>
        </div>
    </div>
</section>

<!-- Detection Information -->
<section>
    <h3>üîç Language Detection Debug Info</h3>
    <div class="demo-section">
        <details>
            <summary>Click to show detection details</summary>
            <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto;">{{ detection_info|json }}</pre>
        </details>
    </div>
</section>

<!-- Translation Cache Stats -->
<section>
    <h3>üìä Translation Cache Statistics</h3>
    <div class="demo-section">
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-number">{{ translator_stats.current_locale }}</div>
                <div class="stat-label">Current Locale</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">{{ translator_stats.loaded_namespaces }}</div>
                <div class="stat-label">Loaded Namespaces</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">{{ translator_stats.cached_translations }}</div>
                <div class="stat-label">Cached Translations</div>
            </div>
        </div>
    </div>
</section>

<style>
    .language-switcher {
        background: #e8f4fd;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        text-align: center;
    }

    .demo-section {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin: 15px 0;
    }

    .demo-table {
        width: 100%;
        border-collapse: collapse;
        margin: 10px 0;
    }

    .demo-table td {
        padding: 8px;
        border-bottom: 1px solid #ddd;
    }

    .demo-table code {
        background: #f0f0f0;
        padding: 3px 6px;
        border-radius: 3px;
        font-family: monospace;
    }

    .plural-demo, .match-event {
        background: white;
        padding: 15px;
        margin: 10px 0;
        border-left: 4px solid #667eea;
        border-radius: 4px;
    }

    .singular {
        color: #28a745;
    }

    .plural {
        color: #007bff;
    }

    .event-text {
        font-style: italic;
        color: #495057;
    }

    .live-demo {
        background: white;
        padding: 20px;
        border-radius: 8px;
        border: 2px solid #667eea;
    }

    .live-demo p {
        margin: 10px 0;
        padding: 8px;
        background: #f8f9fa;
        border-radius: 4px;
    }

    .parameter-example {
        background: white;
        padding: 15px;
        margin: 10px 0;
        border-radius: 5px;
        border-left: 4px solid #ffc107;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin: 15px 0;
    }

    .stat-box {
        text-align: center;
        padding: 20px;
        background: white;
        border-radius: 8px;
        border: 1px solid #ddd;
    }

    .stat-number {
        font-size: 1.5em;
        font-weight: bold;
        color: #667eea;
    }

    .stat-label {
        color: #666;
        margin-top: 5px;
        font-size: 0.9em;
    }

    section {
        margin: 30px 0;
    }
</style>
{% endblock %}